_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[35],{"073A":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users/profile",function(){return n("6wg8")}])},"6wg8":function(e,t,n){"use strict";n.r(t);var a=n("o0o1"),r=n.n(a),i=n("rePB"),c=n("HaE+"),o=n("ODXe"),s=n("q1tI"),u=n.n(s),l=n("nOHt"),p=n("9Koi"),d=n("R/WZ"),f=n("tRbT"),m=n("kKAo"),g=n("PsDL"),b=n("469l"),O=n("r9w1"),h=n("Z3vd"),j=n("79Xs"),w=n("cBaE"),v=n("apO0"),y=u.a.createElement;function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=Object(d.a)((function(e){return{mainContainer:{width:"100%",height:"100vh"},loginContainer:{padding:e.spacing(3)},avatar:{width:e.spacing(10),height:e.spacing(10)},success:{background:"#4caf50",color:"white"},error:{background:"#f44336",color:"white"}}}));t.default=function(){var e=Object(l.useRouter)(),t=E(),n=Object(p.a)().t,a=Object(w.e)(),u=Object(o.a)(a,2),d=u[0],P=u[1],_=Object(s.useState)(null),k=_[0],N=_[1],x=Object(s.useState)(null),S=x[0],D=x[1],q=Object(s.useState)(""),W=q[0],A=q[1],H=Object(s.useState)(""),X=H[0],R=H[1],T=(P&&P.roles&&P.roles.find((function(e){return"admin"==e})),function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("image"!=t.target.name){e.next=8;break}return n=t.target.files[0],e.next=4,Object(w.c)(n);case 4:return a=e.sent,D(n),N(C(C({},k),{},{image:a})),e.abrupt("return");case 8:N(C(C({},k),{},Object(i.a)({},t.target.name,t.target.value)));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),U=function(){var t=Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(w.a)("users/index","update",C(C({},k),{},{image:S}));case 2:n=t.sent,console.log(n),n.id?(R("Profile updated"),e.push("/users/user?id=".concat(k.id))):A("Something went wrong!");case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),B=function(){var t=Object(c.a)(r.a.mark((function t(){var n,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(w.a)("users/index","find",{id:e.query.id});case 2:(n=t.sent).users&&n.users[0]?((a=n.users[0]).id==P.id&&(e.query.id=null),N(a)):(A("User not found"),e.push("/"));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(s.useEffect)((function(){P&&(k||(e.query.id?B():N(C({},P))))}),[P,k]),Object(s.useEffect)((function(){d||P||e.push("/")}),[P,d]),y(v.a,{center:!0,title:"".concat(e.query.id?"Edit User":"Account Settings"," | CON"),loading:d||!k},y(f.a,{className:t.mainContainer,justify:"center",alignItems:"center",container:!0,direction:"column",spacing:3},y(f.a,{item:!0},y(m.a,{variant:"outlined",square:!0},y(f.a,{className:t.loginContainer,container:!0,direction:"column",justify:"center",spacing:3},y(f.a,{item:!0,container:!0,justify:"center"},y(g.a,{component:"label"},y(b.a,{src:k&&k.image?k.image:null,className:t.avatar}),y("input",{hidden:!0,type:"file",name:"image",accept:"image/png, image/jpeg",onChange:T}))),y(f.a,{item:!0},y(O.a,{fullWidth:!0,label:n("Name"),name:"name",value:k&&k.name?k.name:"",onChange:T})),y(f.a,{item:!0},y(O.a,{fullWidth:!0,label:n("Address"),name:"address",value:k&&k.address?k.address:"",onChange:T})),y(f.a,{item:!0},y(O.a,{fullWidth:!0,label:n("Email"),name:"email",value:k&&k.email?k.email:"",onChange:T})),y(f.a,{item:!0},y(O.a,{fullWidth:!0,label:n("Password"),type:"password",name:"password",onChange:T})),y(f.a,{item:!0},y(h.a,{variant:"contained",color:"primary",fullWidth:!0,onClick:U},"Save ".concat(e.query.id?"User":"changes")),y(j.a,{open:""!=W,autoHideDuration:6e3,onClose:function(){return A("")},message:W,ContentProps:{classes:{root:t.error}}}),y(j.a,{open:""!=X,autoHideDuration:6e3,onClose:function(){return R("")},message:X,ContentProps:{classes:{root:t.success}}})))))))}}},[["073A",0,2,4,1,3,5,6,7,8]]]);