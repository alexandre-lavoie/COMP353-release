_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[32],{"30+C":function(e,t,a){"use strict";var n=a("wx14"),r=a("Ff2n"),s=a("q1tI"),o=(a("17x9"),a("iuhU")),i=a("kKAo"),c=a("H2TA"),u=s.forwardRef((function(e,t){var a=e.classes,c=e.className,u=e.raised,l=void 0!==u&&u,d=Object(r.a)(e,["classes","className","raised"]);return s.createElement(i.a,Object(n.a)({className:Object(o.a)(a.root,c),elevation:l?8:1,ref:t},d))}));t.a=Object(c.a)({root:{overflow:"hidden"}},{name:"MuiCard"})(u)},"50B7":function(e,t,a){"use strict";var n=a("wx14"),r=a("Ff2n"),s=a("q1tI"),o=(a("17x9"),a("iuhU")),i=a("H2TA"),c=a("ofer"),u=s.forwardRef((function(e,t){var a=e.action,i=e.avatar,u=e.classes,l=e.className,d=e.component,f=void 0===d?"div":d,p=e.disableTypography,m=void 0!==p&&p,b=e.subheader,h=e.subheaderTypographyProps,g=e.title,v=e.titleTypographyProps,O=Object(r.a)(e,["action","avatar","classes","className","component","disableTypography","subheader","subheaderTypographyProps","title","titleTypographyProps"]),j=g;null==j||j.type===c.a||m||(j=s.createElement(c.a,Object(n.a)({variant:i?"body2":"h5",className:u.title,component:"span",display:"block"},v),j));var y=b;return null==y||y.type===c.a||m||(y=s.createElement(c.a,Object(n.a)({variant:i?"body2":"body1",className:u.subheader,color:"textSecondary",component:"span",display:"block"},h),y)),s.createElement(f,Object(n.a)({className:Object(o.a)(u.root,l),ref:t},O),i&&s.createElement("div",{className:u.avatar},i),s.createElement("div",{className:u.content},j,y),a&&s.createElement("div",{className:u.action},a))}));t.a=Object(i.a)({root:{display:"flex",alignItems:"center",padding:16},avatar:{flex:"0 0 auto",marginRight:16},action:{flex:"0 0 auto",alignSelf:"flex-start",marginTop:-8,marginRight:-8},content:{flex:"1 1 auto"},title:{},subheader:{}},{name:"MuiCardHeader"})(u)},JSsD:function(e,t,a){"use strict";var n=a("viY9"),r=Object(n.a)({palette:{type:"dark",primary:{main:"#0081A7"},secondary:{main:"#00AFB9"}}});t.a=r},PWtF:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users",function(){return a("tm8K")}])},ZuSV:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("q1tI")),s=(0,n(a("8/g6")).default)(r.default.createElement("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVert");t.default=s},lFIR:function(e,t,a){"use strict";var n=a("wx14"),r=a("Ff2n"),s=a("q1tI"),o=(a("17x9"),a("iuhU")),i=a("H2TA"),c=a("VD++"),u=s.forwardRef((function(e,t){var a=e.children,i=e.classes,u=e.className,l=e.focusVisibleClassName,d=Object(r.a)(e,["children","classes","className","focusVisibleClassName"]);return s.createElement(c.a,Object(n.a)({className:Object(o.a)(i.root,u),focusVisibleClassName:Object(o.a)(l,i.focusVisible),ref:t},d),a,s.createElement("span",{className:i.focusHighlight}))}));t.a=Object(i.a)((function(e){return{root:{display:"block",textAlign:"inherit",width:"100%","&:hover $focusHighlight":{opacity:e.palette.action.hoverOpacity},"&$focusVisible $focusHighlight":{opacity:.12}},focusVisible:{},focusHighlight:{overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:e.transitions.create("opacity",{duration:e.transitions.duration.short})}}}),{name:"MuiCardActionArea"})(u)},tm8K:function(e,t,a){"use strict";a.r(t);var n=a("o0o1"),r=a.n(n),s=a("HaE+"),o=a("ODXe"),i=a("q1tI"),c=a.n(i),u=a("apO0"),l=a("nOHt"),d=a("R/WZ"),f=a("tRbT"),p=a("ofer"),m=a("bqsI"),b=a("30+C"),h=a("r9w1"),g=a("kKAo"),v=a("79Xs"),O=a("cBaE"),j=a("JSsD"),y=a("lFIR"),w=a("50B7"),x=a("469l"),N=a("PsDL"),E=a("gd/W"),k=a("jjAL"),C=a("ZuSV"),T=a.n(C),S=a("9Koi"),_=c.a.createElement,R=function(e){var t=Object(S.a)().t,a=Object(l.useRouter)(),n=c.a.useState(null),r=Object(o.a)(n,2),s=r[0],i=r[1],u=e.user;return _(b.a,{variant:"outlined",square:!0},_(y.a,{onClick:function(){return null==s?a.push("/users/user?id=".concat(u.id)):""}},_(w.a,{avatar:_(x.a,{src:u.image?u.image:null},u.name.charAt(0)),title:_(c.a.Fragment,null,u.name,u.roles&&null!=u.roles.find((function(e){return"admin"==e}))?" : admin":""),subheader:_(f.a,{container:!0,direction:"column",alignItems:"flex-start"},_(f.a,{item:!0},u.email),_(f.a,{item:!0},u.address)),action:e.privileged?_(c.a.Fragment,null,_(N.a,{onMouseOver:function(e){return i(e.currentTarget)}},_(T.a,null)),_(E.a,{anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:function(){return i(null)}},_(k.a,{onClick:function(){a.push("/users/profile?id=".concat(u.id))}},"Edit"),_(k.a,{onClick:function(){return e.onDelete(u)}},t("Delete")))):""})))},A=c.a.createElement,D=Object(d.a)((function(e){return{root:{background:"#4caf50",color:"white"},myCondos:{padding:e.spacing(2),width:"100%"},user:{paddingTop:e.spacing(2)},success:{background:"#4caf50",color:"white"},error:{background:"#f44336",color:"white"}}}));t.default=function(){var e=Object(l.useRouter)(),t=D(),a=Object(O.e)(),n=Object(o.a)(a,2),c=n[0],d=n[1],y=Object(i.useState)([]),w=y[0],x=y[1],N=Object(i.useState)([]),E=N[0],k=N[1],C=Object(i.useState)([]),T=C[0],S=C[1],_=Object(i.useState)(""),H=_[0],P=_[1],q=Object(i.useState)(""),F=q[0],I=q[1],V=Object(i.useState)(""),M=V[0],K=V[1],U=d&&d.roles&&null!=d.roles.find((function(e){return"admin"==e})),B=function(){var e=Object(s.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)("users/index");case 2:(t=e.sent).users&&(a=t.users,x(a));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(s.a)(r.a.mark((function e(t){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)("users/index","delete",{id:t.id});case 2:"OK"==e.sent.status?(x(w.filter((function(e){return e!=t}))),I("User deleted")):I("Something went wrong");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){c||d||e.push("/")}),[d,c]),Object(i.useEffect)((function(){if(d){B();var e=d.relationships||[];k(e)}}),[d]),Object(i.useEffect)((function(){""!=H?Object(s.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)("users/index","find",{name:H});case 2:(t=e.sent).users&&(a=t.users,S(a));case 4:case"end":return e.stop()}}),e)})))():S([])}),[H]),A(u.a,{title:"Users | CON",loading:c},A(f.a,{container:!0,spacing:3},A(f.a,{item:!0,container:!0,md:8,xs:12,spacing:3},""!=H?A(f.a,{item:!0,xs:12,md:4},A(p.a,{variant:"h5",component:"p",style:{padding:j.a.spacing(2)}},"".concat(T.length," Users found:"))):"",""!=H?T.map((function(e,t){return A(f.a,{item:!0,xs:12,md:6,key:t},A(R,{user:e,onDelete:W,privileged:U}))})):w.map((function(e,t){return A(m.a,{in:!0,timeout:1e3,key:t},A(f.a,{item:!0,xs:12,md:6},A(R,{user:e,onDelete:W,privileged:U})))}))),A(f.a,{item:!0,container:!0,direction:"column",md:4,xs:12,spacing:3},A(f.a,{item:!0},A(b.a,{style:{padding:j.a.spacing(2)},variant:"outlined",square:!0},A(h.a,{fullWidth:!0,value:H,onChange:function(e){return P(e.target.value)},placeholder:"Search all users",variant:"outlined"}))),A(f.a,{item:!0,container:!0},A(g.a,{className:t.myCondos,variant:"outlined",square:!0},A(p.a,{variant:"h5",component:"p"},"My Contacts"),E?E.map((function(e,a){return A(f.a,{item:!0,xs:12,key:a,className:t.user},A(R,{user:e,onDelete:W,privileged:U}))})):""))),A(v.a,{open:""!=F,autoHideDuration:6e3,onClose:function(){return I("")},message:F,ContentProps:{classes:{root:t.error}}}),A(v.a,{open:""!=M,autoHideDuration:6e3,onClose:function(){return K("")},message:M,ContentProps:{classes:{root:t.success}}})))}}},[["PWtF",0,2,4,1,3,5,6,7,8]]]);