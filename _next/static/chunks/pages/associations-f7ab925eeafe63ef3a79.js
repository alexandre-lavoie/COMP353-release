_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[17],{"4QZN":function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("q1tI")),r=(0,n(a("8/g6")).default)(o.default.createElement("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H6l-2 2V4h16v12z"}),"ChatBubbleOutline");t.default=r},Ftm9:function(e,t,a){"use strict";var n=a("o0o1"),o=a.n(n),r=a("KQm4"),s=a("HaE+"),i=a("ODXe"),c=a("q1tI"),u=a.n(c),l=a("R/WZ"),m=a("30+C"),d=a("50B7"),p=a("469l"),f=a("PsDL"),b=a("gd/W"),g=a("jjAL"),h=a("hlie"),v=a("oa/T"),O=a("ofer"),y=a("Ie8z"),j=a("tRbT"),w=a("IFCi"),x=a("JQEk"),E=a("wb2y"),k=a("aiaX"),C=a.n(k),S=a("4QZN"),N=a.n(S),_=a("ZuSV"),T=a.n(_),q=a("ZqJb"),F=a.n(q),D=a("9Koi"),I=a("kKAo"),H=a("JSsD"),R=a("nOHt"),A=u.a.createElement,B=Object(l.a)({background:{backgroundColor:H.a.palette.primary.main,padding:H.a.spacing(1)},small:{width:H.a.spacing(4),height:H.a.spacing(4)}}),P=function(e){var t=Object(R.useRouter)(),a=B();return A(j.a,{container:!0,spacing:2,alignItems:"center",wrap:"nowrap"},A(j.a,{item:!0},A(p.a,{src:e.user.image?e.user.image:null,className:a.small},e.user.name.charAt(0))),A(j.a,{item:!0},A(I.a,{className:a.background},A(h.a,{color:"inherit",href:"#",onClick:function(){return t.push("/users/user?id=".concat(e.user.id))}},e.user.name),A(O.a,{color:"textSecondary"},e.data))))},M=u.a.createElement,V=Object(l.a)({commentSection:{margin:H.a.spacing(1)}}),L=function(e){var t=V();return M(j.a,{className:t.commentSection,container:!0,direction:"column",spacing:1},e.comments?e.comments.map((function(e,t){return M(j.a,{item:!0,key:t},M(P,{id:e.id,user_id:e.user_id,user:e.user,post_id:e.post_id,time:e.time,data:e.data,type:e.type}))})):"")},W=a("cBaE"),z=a("r9w1"),K=u.a.createElement,Z=Object(l.a)({small:{width:H.a.spacing(4),height:H.a.spacing(4)},large:{width:H.a.spacing(7),height:H.a.spacing(7)},commentField:{paddingLeft:H.a.spacing(2),paddingRight:H.a.spacing(4)},commentBox:{margin:H.a.spacing(1)}}),J=function(e){var t=Z(),a=Object(c.useState)(""),n=a[0],o=a[1];return K(j.a,{item:!0,alignItems:"center",container:!0,className:t.commentBox},K(j.a,{item:!0},K(p.a,{src:e.me.image,className:t.small},e.me.name[0])),K(j.a,{item:!0,xs:!0},K(z.a,{className:t.commentField,placeholder:"Write a comment...",variant:"outlined",size:"small",fullWidth:!0,name:"comment",autoComplete:"off",value:n,onChange:function(e){return o(e.target.value)},onKeyPress:function(t){"Enter"===t.key&&(e.onSend&&""!=n&&e.onSend(n),o(""))}})))},X=a("wd/R"),U=a.n(X),Q=u.a.createElement,G=Object(l.a)({media:{height:H.a.spacing(50)},actions:{margin:H.a.spacing(1)},card:{marginBottom:"24px"}});t.a=function(e){var t=G(),a=Object(R.useRouter)(),n=Object(D.a)().t,l=Object(c.useState)([]),k=l[0],S=l[1],_=Object(c.useState)([]),q=_[0],I=_[1],A=Object(c.useState)(!1),B=A[0],P=A[1],M=e.me,V=M&&M.roles&&null!=M.roles.find((function(e){return"admin"==e})),z=u.a.useState(null),K=Object(i.a)(z,2),Z=K[0],X=K[1],Y=function(){var t=Object(s.a)(o.a.mark((function t(a){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!k){t.next=5;break}return t.next=3,Object(W.a)("posts/replies","create",{post_id:e.post.id,data:a,type:"reply"});case 3:(n=t.sent).id&&(P(!0),S([].concat(Object(r.a)(k),[n])));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(c.useEffect)((function(){var t=e.post.replies;S(t||[])}),[e.post.replies]),Object(c.useEffect)((function(){var t=e.post.associations;I(t||[])}),[e.post.associations]),Q(m.a,{variant:"outlined",square:!0,className:t.card},Q(d.a,{avatar:Q(p.a,{src:e.post.user.image?e.post.user.image:null},e.post.user.name.charAt(0)),action:V||M&&e.post.user_id==M.id?Q(u.a.Fragment,null,Q(f.a,{onClick:function(e){return X(e.currentTarget)}},Q(T.a,null)),Q(b.a,{anchorEl:Z,keepMounted:!0,open:Boolean(Z),onClose:function(){return X(null)}},Q(g.a,{onClick:function(){a.push("/posts/post?id=".concat(e.post.id))}},"View"),Q(g.a,{onClick:function(){a.push("/posts/edit?id=".concat(e.post.id))}},"Edit"),Q(g.a,{onClick:function(){X(null),e.onDelete(e.post)}},"Delete"))):"",title:Q(u.a.Fragment,null,Q(h.a,{color:"inherit",href:"#",onClick:function(){return a.push("/users/user?id=".concat(e.post.user.id))}},e.post.user?e.post.user.name:"user".concat(e.post.user_id," ")),q&&0!=q.length?Q(u.a.Fragment,null,Q(F.a,null),q.map((function(e,t){return Q(u.a.Fragment,{key:t},0!=t?", ":"",Q(h.a,{color:"inherit",href:"#",onClick:function(){return a.push("/associations/association?id=".concat(e.id))}},e.name))}))):""),subheader:e.post.time?U()(e.post.time).fromNow():null}),Q(v.a,null,Q(O.a,{color:"textPrimary",style:{whiteSpace:"pre-line"}},e.post.data)),e.post.image?Q(y.a,{className:t.media,image:e.post.image}):"",Q(j.a,{className:t.actions,container:!0,direction:"column",alignItems:"stretch"},Q(j.a,{item:!0},Q(f.a,{title:n("Comments"),onClick:function(){return P(!B)}},Q(w.a,{badgeContent:e.post.replies&&!B?e.post.replies.length:0,color:"secondary"},Q(B?C.a:N.a,null)))),Q(j.a,{item:!0},Q(x.a,{in:B},Q(E.a,{style:{marginBottom:H.a.spacing(2)}}),Q(J,{me:e.me,onSend:Y}),Q(L,{comments:k})))))}},IsqK:function(e,t,a){"use strict";var n=a("wx14"),o=a("Ff2n"),r=a("q1tI"),s=(a("17x9"),a("iuhU")),i=a("H2TA"),c=a("ofer"),u=a("MquD"),l=r.forwardRef((function(e,t){var a=e.children,i=e.classes,l=e.className,m=e.disableTypography,d=void 0!==m&&m,p=e.inset,f=void 0!==p&&p,b=e.primary,g=e.primaryTypographyProps,h=e.secondary,v=e.secondaryTypographyProps,O=Object(o.a)(e,["children","classes","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"]),y=r.useContext(u.a).dense,j=null!=b?b:a;null==j||j.type===c.a||d||(j=r.createElement(c.a,Object(n.a)({variant:y?"body2":"body1",className:i.primary,component:"span",display:"block"},g),j));var w=h;return null==w||w.type===c.a||d||(w=r.createElement(c.a,Object(n.a)({variant:"body2",className:i.secondary,color:"textSecondary",display:"block"},v),w)),r.createElement("div",Object(n.a)({className:Object(s.a)(i.root,l,y&&i.dense,f&&i.inset,j&&w&&i.multiline),ref:t},O),j,w)}));t.a=Object(i.a)({root:{flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},multiline:{marginTop:6,marginBottom:6},dense:{},inset:{paddingLeft:56},primary:{},secondary:{}},{name:"MuiListItemText"})(l)},SLcR:function(e,t,a){"use strict";var n=a("wx14"),o=a("Ff2n"),r=a("q1tI"),s=(a("17x9"),a("iuhU")),i=a("H2TA"),c=a("MquD"),u=r.forwardRef((function(e,t){var a=e.classes,i=e.className,u=Object(o.a)(e,["classes","className"]),l=r.useContext(c.a);return r.createElement("div",Object(n.a)({className:Object(s.a)(a.root,i,"flex-start"===l.alignItems&&a.alignItemsFlexStart),ref:t},u))}));t.a=Object(i.a)({root:{minWidth:56,flexShrink:0},alignItemsFlexStart:{marginTop:8}},{name:"MuiListItemAvatar"})(u)},Uw0L:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/associations",function(){return a("iDEM")}])},VH89:function(e,t,a){"use strict";var n=a("q1tI"),o=a.n(n),r=a("tRbT"),s=a("Ftm9"),i=o.a.createElement;t.a=function(e){return e.posts?i(o.a.Fragment,null,e.posts.filter((function(t){return!t.associations||0==t.associations.length||e.me.roles&&e.me.roles.includes("admin")||e.me.associations&&e.me.associations.some((function(e){return t.associations.some((function(t){return e.id===t.id}))}))})).map((function(t){return i(r.a,{item:!0,key:t.id,xs:12},i(s.a,{me:e.me,post:t,onDelete:e.onDelete}))}))):i(o.a.Fragment,null)}},ZqJb:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("q1tI")),r=(0,n(a("8/g6")).default)(o.default.createElement("path",{d:"M10 17l5-5-5-5v10z"}),"ArrowRight");t.default=r},aiaX:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a("q1tI")),r=(0,n(a("8/g6")).default)(o.default.createElement("path",{d:"M20 2H4c-1.1 0-2 .9-2 2v18l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2z"}),"ChatBubble");t.default=r},hlie:function(e,t,a){"use strict";var n=a("wx14"),o=a("Ff2n"),r=a("q1tI"),s=(a("17x9"),a("iuhU")),i=a("NqtD"),c=a("H2TA"),u=a("G7As"),l=a("bfFb"),m=a("ofer"),d=r.forwardRef((function(e,t){var a=e.classes,c=e.className,d=e.color,p=void 0===d?"primary":d,f=e.component,b=void 0===f?"a":f,g=e.onBlur,h=e.onFocus,v=e.TypographyClasses,O=e.underline,y=void 0===O?"hover":O,j=e.variant,w=void 0===j?"inherit":j,x=Object(o.a)(e,["classes","className","color","component","onBlur","onFocus","TypographyClasses","underline","variant"]),E=Object(u.a)(),k=E.isFocusVisible,C=E.onBlurVisible,S=E.ref,N=r.useState(!1),_=N[0],T=N[1],q=Object(l.a)(t,S);return r.createElement(m.a,Object(n.a)({className:Object(s.a)(a.root,a["underline".concat(Object(i.a)(y))],c,_&&a.focusVisible,"button"===b&&a.button),classes:v,color:p,component:b,onBlur:function(e){_&&(C(),T(!1)),g&&g(e)},onFocus:function(e){k(e)&&T(!0),h&&h(e)},ref:q,variant:w},x))}));t.a=Object(c.a)({root:{},underlineNone:{textDecoration:"none"},underlineHover:{textDecoration:"none","&:hover":{textDecoration:"underline"}},underlineAlways:{textDecoration:"underline"},button:{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle","-moz-appearance":"none","-webkit-appearance":"none","&::-moz-focus-inner":{borderStyle:"none"},"&$focusVisible":{outline:"auto"}},focusVisible:{}},{name:"MuiLink"})(d)},iDEM:function(e,t,a){"use strict";a.r(t);var n=a("o0o1"),o=a.n(n),r=a("HaE+"),s=a("ODXe"),i=a("q1tI"),c=a.n(i),u=a("nOHt"),l=a("R/WZ"),m=a("tRbT"),d=a("79Xs"),p=a("30+C"),f=a("r9w1"),b=a("kKAo"),g=a("ofer"),h=a("cBaE"),v=a("VH89"),O=a("JSsD"),y=a("rcHE"),j=a("apO0"),w=c.a.createElement,x=Object(l.a)({success:{background:"#4caf50",color:"white"},error:{background:"#f44336",color:"white"}});t.default=function(){var e=x(),t=Object(u.useRouter)(),a=Object(h.e)(),n=Object(s.a)(a,2),c=n[0],l=n[1],E=Object(i.useState)([]),k=E[0],C=E[1],S=Object(i.useState)([]),N=S[0],_=S[1],T=Object(i.useState)([]),q=T[0],F=T[1],D=Object(i.useState)(""),I=D[0],H=D[1],R=Object(i.useState)(""),A=R[0],B=R[1],P=Object(i.useState)(""),M=P[0],V=P[1],L=function(){var e=Object(r.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.a)("posts/index","delete",{id:t.id});case 2:"OK"==e.sent.status?(C(k.filter((function(e){return e!=t}))),V("Post deleted")):B("Permission required");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(i.useEffect)((function(){c||l||t.push("/")}),[l,c]),Object(h.d)(Object(r.a)(o.a.mark((function e(){var t,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.a)("associations/posts");case 2:(t=e.sent).association_posts&&(a=t.association_posts,n=a.map((function(e){return e.post})),C(n.reverse()));case 4:case"end":return e.stop()}}),e)}))),h.b),Object(i.useEffect)((function(){""!=I?Object(r.a)(o.a.mark((function e(){var t,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.a)("associations/index","find",{name:I});case 2:(t=e.sent).associations&&(a=t.associations,n=a.filter((function(e){return"1"==e.active})),F(n));case 4:case"end":return e.stop()}}),e)})))():F([])}),[I]),Object(i.useEffect)((function(){l&&Object(r.a)(o.a.mark((function e(){var t,a,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.a)("associations/members","find",{user_id:l.id});case 2:(t=e.sent).association_members&&(a=t.association_members,n=a.map((function(e){return e.association})),_(n));case 4:case"end":return e.stop()}}),e)})))()}),[l]),w(j.a,{title:"Associations | CON",loading:c},w(m.a,{container:!0,spacing:3},w(m.a,{item:!0,container:!0,direction:"column",md:8,xs:12,spacing:3},w(v.a,{me:l,posts:k,onDelete:L}),w(d.a,{open:""!=A,autoHideDuration:6e3,onClose:function(){return B("")},message:A,ContentProps:{classes:{root:e.error}}}),w(d.a,{open:""!=M,autoHideDuration:6e3,onClose:function(){return V("")},message:M,ContentProps:{classes:{root:e.success}}})),w(m.a,{item:!0,container:!0,direction:"column",md:4,xs:12,spacing:3},w(m.a,{item:!0},w(p.a,{variant:"outlined",square:!0,style:{padding:O.a.spacing(2)}},w(f.a,{fullWidth:!0,value:I,onChange:function(e){return H(e.target.value)},placeholder:"Search association",variant:"outlined"}))),w(m.a,{item:!0},0!=N.length||0!=q.length?w(b.a,{variant:"outlined",square:!0},w(g.a,{variant:"h5",component:"p",style:{padding:O.a.spacing(2)}},""!=I?"Found Associations":"My Associations"),w(y.a,{heads:""!=I?q:N,onSelect:function(e){return t.push("/associations/association?id=".concat(e))}})):""))))}},rcHE:function(e,t,a){"use strict";var n=a("q1tI"),o=a.n(n),r=a("R/WZ"),s=a("eD//"),i=a("tVbE"),c=a("SLcR"),u=a("469l"),l=a("IsqK"),m=o.a.createElement,d=function(e){return m(i.a,{button:!0,onClick:function(){return e.onSelect(e.head.id)}},m(c.a,null,m(u.a,{src:e.head.image},e.icon?e.icon:e.head.name.charAt(0))),m(l.a,{primary:e.head.name,secondary:e.head.subname?e.head.subname:""}))},p=o.a.createElement,f=Object(r.a)((function(e){return{chatHeadsContainer:{overflowY:"auto",maxHeight:"240px"}}}));t.a=function(e){var t=f();return e.heads.length>0?p(s.a,{className:t.chatHeadsContainer},e.heads.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(t,a){return p(d,{key:a,head:t,icon:e.icon,onSelect:function(t){return e.onSelect(t)}})}))):p(o.a.Fragment,null)}}},[["Uw0L",0,2,4,10,1,3,5,6,7,8,11,9]]]);