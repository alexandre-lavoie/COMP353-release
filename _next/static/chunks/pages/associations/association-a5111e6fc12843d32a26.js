_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[17],{"248F":function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("q1tI")),i=(0,n(a("8/g6")).default)(r.default.createElement("path",{d:"M3 4V1h2v3h3v2H5v3H3V6H0V4h3zm3 6V7h3V4h7l1.83 2H21c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2V10h3zm7 9c2.76 0 5-2.24 5-5s-2.24-5-5-5-5 2.24-5 5 2.24 5 5 5zm-3.2-5c0 1.77 1.43 3.2 3.2 3.2s3.2-1.43 3.2-3.2-1.43-3.2-3.2-3.2-3.2 1.43-3.2 3.2z"}),"AddAPhoto");t.default=i},"80KL":function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("q1tI")),i=(0,n(a("8/g6")).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{d:"M8.17 5.7L1 10.48V21h5v-8h4v8h5V10.25z"}),r.default.createElement("path",{d:"M10 3v1.51l2 1.33L13.73 7H15v.85l2 1.34V11h2v2h-2v2h2v2h-2v4h6V3H10zm9 6h-2V7h2v2z"})),"HomeWork");t.default=i},IsqK:function(e,t,a){"use strict";var n=a("wx14"),r=a("Ff2n"),i=a("q1tI"),c=(a("17x9"),a("iuhU")),o=a("H2TA"),s=a("ofer"),u=a("MquD"),l=i.forwardRef((function(e,t){var a=e.children,o=e.classes,l=e.className,d=e.disableTypography,p=void 0!==d&&d,f=e.inset,m=void 0!==f&&f,b=e.primary,v=e.primaryTypographyProps,h=e.secondary,g=e.secondaryTypographyProps,O=Object(r.a)(e,["children","classes","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"]),y=i.useContext(u.a).dense,j=null!=b?b:a;null==j||j.type===s.a||p||(j=i.createElement(s.a,Object(n.a)({variant:y?"body2":"body1",className:o.primary,component:"span",display:"block"},v),j));var w=h;return null==w||w.type===s.a||p||(w=i.createElement(s.a,Object(n.a)({variant:"body2",className:o.secondary,color:"textSecondary",display:"block"},g),w)),i.createElement("div",Object(n.a)({className:Object(c.a)(o.root,l,y&&o.dense,m&&o.inset,j&&w&&o.multiline),ref:t},O),j,w)}));t.a=Object(o.a)({root:{flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},multiline:{marginTop:6,marginBottom:6},dense:{},inset:{paddingLeft:56},primary:{},secondary:{}},{name:"MuiListItemText"})(l)},MJgZ:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("q1tI")),i=(0,n(a("8/g6")).default)(r.default.createElement("path",{d:"M8 10H5V7H3v3H0v2h3v3h2v-3h3v-2zm10 1c1.66 0 2.99-1.34 2.99-3S19.66 5 18 5c-.32 0-.63.05-.91.14.57.81.9 1.79.9 2.86s-.34 2.04-.9 2.86c.28.09.59.14.91.14zm-5 0c1.66 0 2.99-1.34 2.99-3S14.66 5 13 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm6.62 2.16c.83.73 1.38 1.66 1.38 2.84v2h3v-2c0-1.54-2.37-2.49-4.38-2.84zM13 13c-2 0-6 1-6 3v2h12v-2c0-2-4-3-6-3z"}),"GroupAdd");t.default=i},Rme4:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("q1tI")),i=(0,n(a("8/g6")).default)(r.default.createElement("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home");t.default=i},SLcR:function(e,t,a){"use strict";var n=a("wx14"),r=a("Ff2n"),i=a("q1tI"),c=(a("17x9"),a("iuhU")),o=a("H2TA"),s=a("MquD"),u=i.forwardRef((function(e,t){var a=e.classes,o=e.className,u=Object(r.a)(e,["classes","className"]),l=i.useContext(s.a);return i.createElement("div",Object(n.a)({className:Object(c.a)(a.root,o,"flex-start"===l.alignItems&&a.alignItemsFlexStart),ref:t},u))}));t.a=Object(o.a)({root:{minWidth:56,flexShrink:0},alignItemsFlexStart:{marginTop:8}},{name:"MuiListItemAvatar"})(u)},VH89:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),i=a("tRbT"),c=a("Ftm9"),o=r.a.createElement;t.a=function(e){return e.posts?o(r.a.Fragment,null,e.posts.map((function(t,a){return o(i.a,{item:!0,key:a,xs:12},o(c.a,{me:e.me,post:t,onDelete:e.onDelete}))}))):o(r.a.Fragment,null)}},"hYQ+":function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("q1tI")),i=(0,n(a("8/g6")).default)(r.default.createElement("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"}),"AttachMoney");t.default=i},i5Ti:function(e,t,a){"use strict";a.r(t);var n=a("o0o1"),r=a.n(n),i=a("HaE+"),c=a("rePB"),o=a("KQm4"),s=a("ODXe"),u=a("q1tI"),l=a.n(u),d=a("R/WZ"),p=a("tRbT"),f=a("30+C"),m=a("50B7"),b=a("ofer"),v=a("csfp"),h=a("9jPY"),g=a("PsDL"),O=a("gd/W"),y=a("jjAL"),j=a("JQEk"),w=a("Z3vd"),x=a("79Xs"),E=a("wb2y"),P=a("cBaE"),S=a("eD//"),k=a("tVbE"),q=a("IsqK"),_=a("SLcR"),T=a("469l"),H=a("y9ZN"),I=a.n(H),M=a("80KL"),C=a.n(M),N=a("Rme4"),R=a.n(N),D=a("MJgZ"),V=a.n(D),z=a("ZuSV"),L=a.n(z),A=a("hYQ+"),F=a.n(A),B=a("nOHt"),Z=a("JSsD"),J=a("9Koi"),K=a("xM+5"),W=a("VH89"),Y=a("rcHE"),Q=a("apO0"),X=l.a.createElement;function U(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function G(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?U(Object(a),!0).forEach((function(t){Object(c.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):U(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var $=Object(d.a)({media:{height:500},panel:{marginTop:Z.a.spacing(4)},mapPanel:{marginTop:Z.a.spacing(4),paddingBottom:Z.a.spacing(0)},map:{padding:Z.a.spacing(0)},nested:{paddingLeft:Z.a.spacing(4)}});t.default=function(e){var t=Object(P.e)(),a=Object(s.a)(t,2),n=a[0],c=a[1],d=Object(J.a)().t,H=Object(B.useRouter)(),M=$(),N=Object(u.useState)(null),D=N[0],z=N[1],A=Object(u.useState)(),U=A[0],ee=A[1],te=Object(u.useState)([]),ae=te[0],ne=te[1],re=Object(u.useState)(""),ie=re[0],ce=re[1],oe=Object(u.useState)(!1),se=oe[0],ue=oe[1],le=Object(u.useState)(!1),de=le[0],pe=le[1],fe=Object(u.useState)(!1),me=fe[0],be=fe[1],ve=Object(u.useState)(null),he=ve[0],ge=ve[1],Oe=c&&c.roles&&null!=c.roles.find((function(e){return"admin"==e})),ye=l.a.useState(null),je=Object(s.a)(ye,2),we=je[0],xe=je[1],Ee=function(){var e=[];return D.buildings.forEach((function(t){return e.push.apply(e,Object(o.a)(t.condos))})),e.map((function(t){return G(G({},e),{},{id:t.id,name:"condo ".concat(t.building_id,"-").concat(t.number),image:t.image})}))},Pe=function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!D){e.next=5;break}return e.next=3,Object(P.a)("associations/index","delete",{id:D.id});case 3:(t=e.sent).status?(ce("Association deleted"),H.push("/associations")):(console.log(t),ce("Something went wrong"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=6;break}return t=he?he.id:U.find((function(e){return e.user_id==c.id})).user_id,e.next=4,Object(P.a)("associations/members","delete",{id:t});case 4:"OK"==e.sent.status?(ee(U.filter((function(e){return e.user_id!=c.id}))),ge(null)):ce("Something went wrong");case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c||!U){e.next=5;break}return e.next=3,Object(P.a)("associations/members","create",{association_id:D.id,user_id:c.id,type:"member"});case 3:(t=e.sent).id?"1"==t.active?ee([].concat(Object(o.a)(U),[t])):ge(t):ce("Request sent");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),qe=function(){var e=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(P.a)("associations/index","update",{id:D.id,active:1});case 2:e.sent.id?(be(!0),ce("Association activated")):ce("Something went wrong"),xe(null);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_e=function(){var e=Object(i.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=5;break}return e.next=3,Object(P.a)("posts/index","create",G(G({},t),{},{type:"post",association_ids:[D.id]}));case 3:(a=e.sent).id?(ne([a].concat(Object(o.a)(ae))),ce("Posted")):ce("Something went wrong");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Te=function(){var e=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c&&(H.query.id||H.push("/associations"),Me(),Ie(),He());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),He=function(){var e=Object(i.a)(r.a.mark((function e(){var t,a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H.query.id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(P.a)("associations/posts","find",{association_id:H.query.id});case 4:(t=e.sent).association_posts&&(a=t.association_posts,n=a.map((function(e){return e.post})),ne(n.reverse()));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(i.a)(r.a.mark((function e(){var t,a,n,i;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H.query.id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(P.a)("associations/members","find",{association_id:H.query.id});case 4:(t=e.sent).association_members&&(a=t.association_members,n=a.filter((function(e){return"1"==e.active})),i=a.find((function(e){return e.user_id==c.id&&"1"!=e.active})),console.log(n),ee(n),ge(i));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=Object(i.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H.query.id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(P.a)("associations/index","find",{id:H.query.id});case 4:(t=e.sent).associations&&t.associations[0]?("1"==(a=t.associations[0]).active||Oe||H.push("/associations"),z(a),be("1"==a.active)):(ce("Association not found"),H.push("/associations"));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.useEffect)((function(){if(c&&U){var e=U.find((function(e){return e.user_id==c.id}));ue(null!=e&&"1"==e.active),pe(null!=e&&"president"==e.type)}}),[U,c]),Object(u.useEffect)((function(){n||c||H.push("/")}),[c,n]),Object(u.useEffect)((function(){Te()}),[c]),Object(P.d)(He,P.b),X(Q.a,{title:D?"".concat(D.name," | CON"):"CON",loading:n||null==D},X(p.a,{container:!0,spacing:4},X(p.a,{item:!0,container:!0,direction:"column",spacing:3,xs:12,md:8},X(p.a,{item:!0},X(f.a,{variant:"outlined",square:!0},X(m.a,{title:X(p.a,{container:!0,alignItems:"center",spacing:2},X(p.a,{item:!0},X(b.a,{variant:"h2",color:"textPrimary"},D?D.name:"Association")),D&&!me?X(p.a,{item:!0},X(v.a,{placement:"bottom-end",arrow:!0,title:"This condo will not be visible until an admin approves it"},X(h.a,{size:"small",label:"Unlisted"}))):""),action:Oe||de?X(l.a.Fragment,null,X(g.a,{onClick:function(e){return xe(e.currentTarget)}},X(L.a,null)),X(O.a,{anchorEl:we,keepMounted:!0,open:Boolean(we),onClose:function(){return xe(null)}},D&&!me?X(y.a,{onClick:qe},"Activate"):"",X(y.a,{onClick:function(){D&&H.push("/associations/edit?id=".concat(D.id))}},"Edit"),X(y.a,{onClick:Pe},"Delete"))):""}),X(j.a,{in:D&&me},X(p.a,{container:!0,alignItems:"center",justify:"space-between"},X(p.a,{item:!0},X(m.a,{avatar:X(T.a,null,X(V.a,null)),title:se?"You're a member":"Join group to post"})),X(p.a,{item:!0},X(w.a,{style:{margin:Z.a.spacing(2)},variant:"contained",color:"primary",onClick:Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:se||he?Se():ke();case 1:case"end":return e.stop()}}),e)})))},se?"Leave":he?"Cancel Request":"Join")))))),se?X(p.a,{item:!0},X(K.a,{onSend:_e})):"",X(x.a,{open:""!=ie,autoHideDuration:6e3,onClose:function(){return ce("")},message:ie}),X(p.a,{item:!0,container:!0,direction:"column",spacing:3},X(W.a,{me:c,posts:ae}))),X(p.a,{item:!0,xs:12,md:4},X(f.a,{variant:"outlined",square:!0},X(S.a,null,X(k.a,null,X(_.a,null,X(T.a,null,X(F.a,null))),X(q.a,{primary:d("Budget"),secondary:D&&D.budget?D.budget.replace(/\B(?=(\d{3})+(?!\d))/g,","):0})))),X(f.a,{variant:"outlined",square:!0,className:M.panel},X(S.a,null,X(k.a,null,X(_.a,null,X(T.a,null,X(C.a,null))),X(q.a,{primary:d("Properties"),secondary:D&&D.buildings?"".concat(D.buildings.length," buildings - ").concat(Ee().length," condos"):0})),D&&D.buildings?X(l.a.Fragment,null,X(E.a,null),X(Y.a,{heads:Ee(),icon:X(R.a,null),onSelect:function(e){return H.push("/condos/condo?id=".concat(e))}})):"")),X(f.a,{variant:"outlined",square:!0,className:M.panel},X(S.a,null,X(k.a,null,X(_.a,null,X(T.a,null,X(I.a,null))),X(q.a,{primary:d("Members"),secondary:D&&U?U.length:0})),D&&U?X(l.a.Fragment,null,X(E.a,null),X(Y.a,{heads:U.map((function(e){return{id:e.id,name:e.user?e.user.name:"",subname:e.type,image:e.image}})),onSelect:function(e){return H.push("/users/user?id=".concat(e))}})):"")))))}},rcHE:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),i=a("R/WZ"),c=a("eD//"),o=a("tVbE"),s=a("SLcR"),u=a("469l"),l=a("IsqK"),d=r.a.createElement,p=function(e){return d(o.a,{button:!0,onClick:function(){return e.onSelect(e.head.id)}},d(s.a,null,d(u.a,{src:e.head.image},e.icon?e.icon:e.head.name.charAt(0))),d(l.a,{primary:e.head.name,secondary:e.head.subname?e.head.subname:""}))},f=r.a.createElement,m=Object(i.a)((function(e){return{chatHeadsContainer:{overflowY:"auto",maxHeight:"240px"}}}));t.a=function(e){var t=m();return e.heads.length>0?f(c.a,{className:t.chatHeadsContainer},e.heads.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(t,a){return f(p,{key:a,head:t,icon:e.icon,onSelect:function(t){return e.onSelect(t)}})}))):f(r.a.Fragment,null)}},"tqx+":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/associations/association",function(){return a("i5Ti")}])},"xM+5":function(e,t,a){"use strict";var n=a("o0o1"),r=a.n(n),i=a("rePB"),c=a("HaE+"),o=a("q1tI"),s=a.n(o),u=a("R/WZ"),l=a("30+C"),d=a("oa/T"),p=a("r9w1"),f=a("Ie8z"),m=a("tRbT"),b=a("Z3vd"),v=a("PsDL"),h=a("248F"),g=a.n(h),O=a("9Koi"),y=a("JSsD"),j=a("cBaE"),w=s.a.createElement;function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(Object(a),!0).forEach((function(t){Object(i.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var P=Object(u.a)({options:{margin:y.a.spacing(2),marginTop:0},media:{height:300,marginTop:y.a.spacing(2),borderRadius:y.a.spacing(1)}});t.a=function(e){var t=Object(O.a)().t,a=P(),n=Object(o.useState)(e.post),s=n[0],u=n[1],h=Object(o.useState)(""),y=h[0],x=h[1],S=function(){var e=Object(c.a)(r.a.mark((function e(t){var a,n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("image"!=t.target.name){e.next=8;break}return a=t.target.files[0],e.next=4,Object(j.c)(a);case 4:return n=e.sent,x(n),u(E(E({},s),{},{image:a})),e.abrupt("return");case 8:u(E(E({},s),{},Object(i.a)({},t.target.name,t.target.value)));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=s;e.data="",u(e)},q=function(){x(null);var e=s;delete e.image,u(e)};return Object(o.useEffect)((function(){u(e.post)}),[e.post]),w(l.a,{variant:"outlined",square:!0},w(d.a,null,w(p.a,{variant:"outlined",multiline:!0,rows:s&&s.data?s.data.split("\n").length:1,fullWidth:!0,value:s&&s.data?s.data:"",autoComplete:"off",placeholder:t("What's on your mind?"),name:"data",onChange:S}),y?w(f.a,{component:"img",className:a.media,image:y}):""),w(m.a,{container:!0,alignItems:"center",justify:"space-between"},w(m.a,{item:!0},y?w(b.a,{className:a.options,onClick:q},"Remove Image"):w(v.a,{component:"label",className:a.options},w(g.a,null),w("input",{hidden:!0,type:"file",name:"image",accept:"image/png, image/jpeg",onChange:S}))),w(m.a,{item:!0},w(b.a,{className:a.options,variant:"contained",color:"primary",onClick:function(){e.onSend(s),k(),q()}},t("Post")))))}},y9ZN:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("q1tI")),i=(0,n(a("8/g6")).default)(r.default.createElement("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}),"People");t.default=i}},[["tqx+",0,2,4,9,1,3,5,6,7,8,10,11]]]);