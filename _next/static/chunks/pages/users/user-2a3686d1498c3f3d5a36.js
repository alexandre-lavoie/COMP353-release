_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[36],{"5RF3":function(e,n,t){"use strict";var a=t("TqRt");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=a(t("q1tI")),s=(0,a(t("8/g6")).default)(r.default.createElement("path",{d:"M11.99 2c-5.52 0-10 4.48-10 10s4.48 10 10 10 10-4.48 10-10-4.48-10-10-10zm3.61 6.34c1.07 0 1.93.86 1.93 1.93 0 1.07-.86 1.93-1.93 1.93-1.07 0-1.93-.86-1.93-1.93-.01-1.07.86-1.93 1.93-1.93zm-6-1.58c1.3 0 2.36 1.06 2.36 2.36 0 1.3-1.06 2.36-2.36 2.36s-2.36-1.06-2.36-2.36c0-1.31 1.05-2.36 2.36-2.36zm0 9.13v3.75c-2.4-.75-4.3-2.6-5.14-4.96 1.05-1.12 3.67-1.69 5.14-1.69.53 0 1.2.08 1.9.22-1.64.87-1.9 2.02-1.9 2.68zM11.99 20c-.27 0-.53-.01-.79-.04v-4.07c0-1.42 2.94-2.13 4.4-2.13 1.07 0 2.92.39 3.84 1.15-1.17 2.97-4.06 5.09-7.45 5.09z"}),"SupervisedUserCircle");n.default=s},"9SoY":function(e,n,t){"use strict";t.r(n);var a=t("wx14"),r=t("KQm4"),s=t("o0o1"),i=t.n(s),u=t("HaE+"),o=t("rePB"),c=t("ODXe"),l=t("q1tI"),p=t.n(l),d=t("R/WZ"),f=t("tRbT"),b=t("30+C"),m=t("50B7"),O=t("ofer"),h=t("PsDL"),g=t("gd/W"),j=t("jjAL"),v=t("r9w1"),y=t("79Xs"),w=t("wb2y"),x=t("cBaE"),S=t("eD//"),k=t("tVbE"),_=t("IsqK"),P=t("SLcR"),E=t("469l"),q=t("y9ZN"),C=t.n(q),D=t("80KL"),N=t.n(D),R=t("Rme4"),I=t.n(R),F=t("ZuSV"),H=t.n(F),L=t("+bXu"),T=t("5RF3"),z=t.n(T),B=t("nOHt"),K=t("JSsD"),M=t("9Koi"),X=t("VH89"),V=t("rcHE"),J=t("apO0"),U=t("xM+5"),Z=p.a.createElement;function A(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function G(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?A(Object(t),!0).forEach((function(n){Object(o.a)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):A(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var W=Object(d.a)({panel:{marginTop:K.a.spacing(3)},nested:{paddingLeft:K.a.spacing(4)},large:{width:K.a.spacing(10),height:K.a.spacing(10)},success:{background:"#4caf50",color:"white"},error:{background:"#f44336",color:"white"}}),Y=["none","friend","family","professor","husband","wife","student","son","daughter"];n.default=function(e){var n=Object(x.e)(),t=Object(c.a)(n,2),s=t[0],o=t[1],d=Object(M.a)().t,q=Object(B.useRouter)(),D=W(),R=Object(l.useState)(""),F=R[0],T=R[1],A=Object(l.useState)(""),Q=A[0],$=A[1],ee=Object(l.useState)(null),ne=ee[0],te=ee[1],ae=Object(l.useState)(null),re=ae[0],se=ae[1],ie=Object(l.useState)(null),ue=ie[0],oe=ie[1],ce=Object(l.useState)(null),le=ce[0],pe=ce[1],de=Object(l.useState)(null),fe=de[0],be=de[1],me=Object(l.useState)(null),Oe=me[0],he=me[1],ge=Object(l.useState)(null),je=ge[0],ve=ge[1],ye=p.a.useState(null),we=Object(c.a)(ye,2),xe=we[0],Se=we[1],ke=o&&o.roles&&null!=o.roles.find((function(e){return"admin"==e})),_e=o&&ne&&o.id==ne.id,Pe=Object(l.useState)("none"),Ee=Pe[0],qe=Pe[1],Ce=Object(l.useState)(""),De=Ce[0],Ne=Ce[1];var Re=function(){var e=Object(u.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ne){e.next=5;break}return e.next=3,Object(x.a)("users/index","delete",{id:ne.id});case 3:(n=e.sent).status?($("Users deleted"),q.push("/")):(console.log(n),T("Something went wrong"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ie=function(){var e=Object(u.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(x.a)("posts/index","delete",{id:n.id});case 2:"OK"==e.sent.status?(oe(ue.filter((function(e){return e!=n}))),$("Post deleted")):T("Permission required");case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),Fe=function(){var e=Object(u.a)(i.a.mark((function e(n){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=5;break}return e.next=3,Object(x.a)("posts/index","create",G(G({},n),{},{type:"post"}));case 3:(t=e.sent).id?(oe([t].concat(Object(r.a)(ue))),$("Posted")):T("Something went wrong");case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),He=function(){var e=Object(u.a)(i.a.mark((function e(n){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("none"!=Ee){e.next=7;break}if(!ne){e.next=5;break}return e.next=4,Object(x.a)("users/relationships","create",{user_id:ne.id,type:n});case 4:t=e.sent;case 5:e.next=19;break;case 7:if("none"!=n){e.next=15;break}if(!je){e.next=12;break}return e.next=11,Object(x.a)("users/relationships","delete",{id:je.id});case 11:t=e.sent;case 12:t.status&&qe("none"),e.next=19;break;case 15:if(!je){e.next=19;break}return e.next=18,Object(x.a)("users/relationships","update",{id:je.id,type:n});case 18:t=e.sent;case 19:t.type&&qe(n);case 20:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(l.useEffect)((function(){s||o||q.push("/")}),[o,s]),Object(l.useEffect)((function(){function e(){return n.apply(this,arguments)}function n(){return(n=Object(u.a)(i.a.mark((function e(){var n,t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q.query.id||q.push("/"),Oe&&clearInterval(Oe),e.next=4,Object(x.a)("users/index","find",{id:q.query.id});case 4:return(n=e.sent).users&&(t=n.users[0])&&(te(t),t.associations&&se(t.associations),t.relationships&&be(t.relationships),t.condos&&pe(t.condos)),e.next=8,Object(x.a)("posts/index","find",{user_id:q.query.id});case 8:(a=e.sent).posts&&oe(a.posts.reverse());case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}e();var t=setInterval((function(){return e()}),1e4);return he(t),function(){clearInterval(t)}}),[q.query.id]),Object(l.useEffect)((function(){Object(u.a)(i.a.mark((function e(){var n,t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=5;break}return e.next=3,Object(x.a)("users/relationships","find",{user_id:o.id,user_id_to:q.query.id});case 3:(n=e.sent).user_relationships&&n.user_relationships[0]?(t=n.user_relationships[0],ve(t),qe(t.type),console.log(t.type)):qe("none");case 5:case"end":return e.stop()}}),e)})))()}),[Ee,ne]),Z(J.a,{title:ne?"".concat(ne.name," | CON"):"CON",loading:s||null==ne},Z(f.a,{container:!0,spacing:3},Z(f.a,{item:!0,container:!0,direction:"column",spacing:3,xs:12,md:8},Z(f.a,{item:!0},Z(b.a,{variant:"outlined",square:!0},Z(m.a,{avatar:ne&&ne.image?Z(E.a,{className:D.large,src:ne.image}):"",title:Z(p.a.Fragment,null,Z(O.a,{variant:"h2",color:"textPrimary"},ne?ne.name:"User")),action:ke||o&&ne&&ne.id==o.id?Z(p.a.Fragment,null,Z(h.a,{onClick:function(e){return Se(e.currentTarget)}},Z(H.a,null)),Z(g.a,{anchorEl:xe,keepMounted:!0,open:Boolean(xe),onClose:function(){return Se(null)}},Z(j.a,{onClick:function(){ne&&q.push("/users/profile?id=".concat(ne.id))}},"Edit"),Z(j.a,{onClick:Re},"Delete"))):""}),Z(f.a,{container:!0,alignItems:"center",justify:"space-between"},Z(f.a,{item:!0},Z(m.a,{avatar:Z(E.a,null,Z(z.a,null)),title:"Set Relationship"})),Z(f.a,{item:!0},Z(L.a,{id:"relationBox",freeSolo:!0,style:{width:150,margin:K.a.spacing(2)},options:Y,getOptionLabel:function(e){return e},value:Ee,inputValue:De,onInputChange:function(e,n){return Ne(n)},renderInput:function(e){return Z(v.a,Object(a.a)({},e,{variant:"outlined"}))},onChange:function(e,n){return He(n)}}))))),_e?Z(f.a,{item:!0},Z(U.a,{onSend:Fe})):"",Z(f.a,{item:!0,container:!0,direction:"column"},Z(X.a,{me:o,posts:ue,onDelete:Ie})),Z(y.a,{open:""!=F,autoHideDuration:6e3,onClose:function(){return T("")},message:F,ContentProps:{classes:{root:D.error}}}),Z(y.a,{open:""!=Q,autoHideDuration:6e3,onClose:function(){return $("")},message:Q,ContentProps:{classes:{root:D.success}}})),Z(f.a,{item:!0,xs:12,md:4},Z(b.a,{variant:"outlined",square:!0},Z(S.a,null,Z(k.a,null,Z(P.a,null,Z(E.a,null,Z(z.a,null))),Z(_.a,{primary:d("Associations"),secondary:re?re.length:0})),re&&0!=re.length?Z(p.a.Fragment,null,Z(w.a,null),Z(V.a,{heads:re.map((function(e){return{name:e.name,id:e.id,image:e.image,subname:e.association_role}})),onSelect:function(e){return q.push("/associations/association?id=".concat(e))}})):"")),Z(b.a,{className:D.panel,variant:"outlined",square:!0},Z(S.a,null,Z(k.a,null,Z(P.a,null,Z(E.a,null,Z(N.a,null))),Z(_.a,{primary:d("Properties"),secondary:le?le.length:0})),le&&0!=le.length?Z(p.a.Fragment,null,Z(w.a,null),Z(V.a,{heads:le.map((function(e){return G(G({},e),{},{id:e.id,name:"condo ".concat(e.building_id,"-").concat(e.number)})})),icon:Z(I.a,null),onSelect:function(e){return q.push("/condos/condo?id=".concat(e))}})):"")),Z(b.a,{className:D.panel,variant:"outlined",square:!0},Z(S.a,null,Z(k.a,null,Z(P.a,null,Z(E.a,null,Z(C.a,null))),Z(_.a,{primary:d("Relationships"),secondary:fe?fe.length:0})),fe&&0!=fe.length?Z(p.a.Fragment,null,Z(w.a,null),Z(V.a,{heads:function(){var e=[],n=fe;return fe.forEach((function(t,a){return e.push(G(G({},t),{},{subname:n[a].relation_type}))})),e}(),onSelect:function(e){return q.push("/users/user?id=".concat(e))}})):"")))))}},uxrG:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users/user",function(){return t("9SoY")}])}},[["uxrG",0,2,4,10,1,3,5,6,7,8,11,9,12,13]]]);