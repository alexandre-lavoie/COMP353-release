_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[17],{"80KL":function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("q1tI")),i=(0,n(a("8/g6")).default)(r.default.createElement(r.default.Fragment,null,r.default.createElement("path",{d:"M8.17 5.7L1 10.48V21h5v-8h4v8h5V10.25z"}),r.default.createElement("path",{d:"M10 3v1.51l2 1.33L13.73 7H15v.85l2 1.34V11h2v2h-2v2h2v2h-2v4h6V3H10zm9 6h-2V7h2v2z"})),"HomeWork");t.default=i},E8kk:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("q1tI")),i=(0,n(a("8/g6")).default)(r.default.createElement("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"}),"Info");t.default=i},IsqK:function(e,t,a){"use strict";var n=a("wx14"),r=a("Ff2n"),i=a("q1tI"),o=(a("17x9"),a("iuhU")),c=a("H2TA"),s=a("ofer"),u=a("MquD"),l=i.forwardRef((function(e,t){var a=e.children,c=e.classes,l=e.className,d=e.disableTypography,m=void 0!==d&&d,p=e.inset,f=void 0!==p&&p,v=e.primary,b=e.primaryTypographyProps,h=e.secondary,g=e.secondaryTypographyProps,y=Object(r.a)(e,["children","classes","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"]),O=i.useContext(u.a).dense,j=null!=v?v:a;null==j||j.type===s.a||m||(j=i.createElement(s.a,Object(n.a)({variant:O?"body2":"body1",className:c.primary,component:"span",display:"block"},b),j));var x=h;return null==x||x.type===s.a||m||(x=i.createElement(s.a,Object(n.a)({variant:"body2",className:c.secondary,color:"textSecondary",display:"block"},g),x)),i.createElement("div",Object(n.a)({className:Object(o.a)(c.root,l,O&&c.dense,f&&c.inset,j&&x&&c.multiline),ref:t},y),j,x)}));t.a=Object(c.a)({root:{flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},multiline:{marginTop:6,marginBottom:6},dense:{},inset:{paddingLeft:56},primary:{},secondary:{}},{name:"MuiListItemText"})(l)},JSsD:function(e,t,a){"use strict";var n=a("viY9"),r=Object(n.a)({palette:{type:"dark",primary:{main:"#0081A7"},secondary:{main:"#00AFB9"}}});t.a=r},MJgZ:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("q1tI")),i=(0,n(a("8/g6")).default)(r.default.createElement("path",{d:"M8 10H5V7H3v3H0v2h3v3h2v-3h3v-2zm10 1c1.66 0 2.99-1.34 2.99-3S19.66 5 18 5c-.32 0-.63.05-.91.14.57.81.9 1.79.9 2.86s-.34 2.04-.9 2.86c.28.09.59.14.91.14zm-5 0c1.66 0 2.99-1.34 2.99-3S14.66 5 13 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm6.62 2.16c.83.73 1.38 1.66 1.38 2.84v2h3v-2c0-1.54-2.37-2.49-4.38-2.84zM13 13c-2 0-6 1-6 3v2h12v-2c0-2-4-3-6-3z"}),"GroupAdd");t.default=i},Rme4:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("q1tI")),i=(0,n(a("8/g6")).default)(r.default.createElement("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home");t.default=i},SLcR:function(e,t,a){"use strict";var n=a("wx14"),r=a("Ff2n"),i=a("q1tI"),o=(a("17x9"),a("iuhU")),c=a("H2TA"),s=a("MquD"),u=i.forwardRef((function(e,t){var a=e.classes,c=e.className,u=Object(r.a)(e,["classes","className"]),l=i.useContext(s.a);return i.createElement("div",Object(n.a)({className:Object(o.a)(a.root,c,"flex-start"===l.alignItems&&a.alignItemsFlexStart),ref:t},u))}));t.a=Object(c.a)({root:{minWidth:56,flexShrink:0},alignItemsFlexStart:{marginTop:8}},{name:"MuiListItemAvatar"})(u)},i5Ti:function(e,t,a){"use strict";a.r(t);var n=a("o0o1"),r=a.n(n),i=a("HaE+"),o=a("rePB"),c=a("KQm4"),s=a("ODXe"),u=a("q1tI"),l=a.n(u),d=a("R/WZ"),m=a("tRbT"),p=a("30+C"),f=a("50B7"),v=a("ofer"),b=a("PsDL"),h=a("gd/W"),g=a("jjAL"),y=a("Z3vd"),O=a("79Xs"),j=a("wb2y"),x=a("cBaE"),w=a("eD//"),_=a("tVbE"),E=a("IsqK"),S=a("SLcR"),k=a("469l"),q=a("E8kk"),P=a.n(q),T=a("y9ZN"),C=a.n(T),M=a("80KL"),I=a.n(M),N=a("Rme4"),H=a.n(N),z=a("MJgZ"),L=a.n(z),R=a("ZuSV"),D=a.n(R),A=a("nOHt"),V=a("JSsD"),F=a("9Koi"),W=a("xM+5"),Z=a("VH89"),B=a("rcHE"),J=a("apO0"),K=l.a.createElement;function X(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function Q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?X(Object(a),!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):X(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Y=Object(d.a)({media:{height:500},panel:{marginTop:V.a.spacing(4)},mapPanel:{marginTop:V.a.spacing(4),paddingBottom:V.a.spacing(0)},map:{padding:V.a.spacing(0)},nested:{paddingLeft:V.a.spacing(4)}});t.default=function(e){var t=Object(x.e)(),a=Object(s.a)(t,2),n=a[0],o=a[1],d=Object(F.a)().t,q=Object(A.useRouter)(),T=Y(),M=Object(u.useState)(null),N=M[0],z=M[1],R=Object(u.useState)(),X=R[0],U=R[1],G=Object(u.useState)([]),$=G[0],ee=G[1],te=Object(u.useState)(""),ae=te[0],ne=te[1],re=Object(u.useState)(!1),ie=re[0],oe=re[1],ce=Object(u.useState)(!1),se=ce[0],ue=ce[1],le=o&&o.roles&&null!=o.roles.find((function(e){return"admin"==e})),de=l.a.useState(null),me=Object(s.a)(de,2),pe=me[0],fe=me[1];Object(u.useEffect)((function(){if(o&&X){var e=X.find((function(e){return e.id==o.id}));oe(null!=e&&e.association_member_active),ue(null!=e&&"president"==e.association_role)}}),[X,o]);var ve=function(){var e=[];return N.buildings.forEach((function(t){return e.push.apply(e,Object(c.a)(t.condos))})),e.map((function(t){return Q(Q({},e),{},{id:t.id,name:"condo ".concat(t.building_id,"-").concat(t.number),image:t.image})}))},be=function(){var e=Object(i.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!N){e.next=5;break}return e.next=3,Object(x.a)("associations/index","delete",{id:N.id});case 3:(t=e.sent).status?ne("Association deleted"):(console.log(t),ne("Something went wrong"));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),he=function(){var e=Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=5;break}return e.next=3,Object(x.a)("associations/members","delete",{id:X.find((function(e){return e.id==o.id})).association_member_id});case 3:e.sent&&U(X.filter((function(e){return e.id!=o.id})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ge=function(){var e=Object(i.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o||!X){e.next=5;break}return e.next=3,Object(x.a)("associations/members","create",{association_id:N.id,user_id:o.id,type:"member"});case 3:(t=e.sent).active&&(a=Q(Q({},o),{},{association_member_active:t.active,association_member_id:t.id,association_role:t.type}),U([].concat(Object(c.a)(X),[a])));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=Object(i.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=5;break}return e.next=3,Object(x.a)("posts/index","create",{association_ids:[N.id],data:t,type:"post"});case 3:(a=e.sent).id&&ee([a].concat(Object(c.a)($)));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Oe=function(){var e=Object(i.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q.query.id||q.push("/associations"),e.next=3,Object(x.a)("associations/index","find",{id:q.query.id});case 3:(t=e.sent).associations&&(a=t.associations[0])&&(z(a),a.posts&&ee(a.posts.reverse()),a.members&&U(a.members));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(u.useEffect)((function(){n||o||q.push("/")}),[o,n]),Object(x.d)(Oe,x.b),K(J.a,{title:N?"".concat(N.name," | CON"):"CON",loading:n||null==N},K(m.a,{container:!0,spacing:4},K(m.a,{item:!0,container:!0,direction:"column",spacing:3,xs:12,md:8},K(m.a,{item:!0},K(p.a,null,K(f.a,{title:K(v.a,{variant:"h2",color:"textPrimary"},N?N.name:"Association"),action:le||se?K(l.a.Fragment,null,K(b.a,{onClick:function(e){return fe(e.currentTarget)}},K(D.a,null)),K(h.a,{anchorEl:pe,keepMounted:!0,open:Boolean(pe),onClose:function(){return fe(null)}},K(g.a,{onClick:function(){N&&q.push("/associations/edit?id=".concat(N.id))}},"Edit"),K(g.a,{onClick:be},"Delete"))):""}),K(m.a,{container:!0,alignItems:"center",justify:"space-between"},K(m.a,{item:!0},K(f.a,{avatar:K(k.a,null,K(L.a,null)),title:ie?"You're a member":"Join group to post"})),K(m.a,{item:!0},K(y.a,{style:{margin:V.a.spacing(2)},variant:"contained",color:"primary",onClick:Object(i.a)(r.a.mark((function e(){return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ie?he():ge();case 1:case"end":return e.stop()}}),e)})))},ie?"Leave":"Join"))))),ie?K(m.a,{item:!0},K(W.a,{onSend:ye})):"",K(O.a,{open:""!=ae,autoHideDuration:6e3,onClose:function(){return ne("")},message:ae}),K(m.a,{item:!0,container:!0,direction:"column",spacing:3},K(Z.a,{me:o,posts:$}))),K(m.a,{item:!0,xs:12,md:4},K(p.a,null,K(w.a,null,K(_.a,null,K(S.a,null,K(k.a,null,K(P.a,null))),K(E.a,{primary:"About",secondary:N?N.name:"Association"})),K(_.a,null,K(E.a,{primary:K(v.a,{align:"justify",component:"p"},"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Quisque at varius purus, nec placerat tortor. Cras sit amet vulputate dolor. Phasellus sit amet libero vitae sapien sagittis ultrices sit amet sed nisi. Curabitur commodo lorem in ligula lacinia, volutpat tincidunt ipsum ornare. Donec lacinia odio facilisis odio placerat fermentum. Cras quis luctus ex. Aenean consequat eros a viverra laoreet. Maecenas nulla neque, interdum eget hendrerit at, vulputate vitae nunc. Praesent sit amet ex convallis, semper erat at, iaculis velit. Mauris porttitor felis vel ante tempus dictum.")})))),K(p.a,{className:T.panel},K(w.a,null,K(_.a,null,K(S.a,null,K(k.a,null,K(I.a,null))),K(E.a,{primary:d("Properties"),secondary:N&&N.buildings?"".concat(N.buildings.length," buildings - ").concat(ve().length," condos"):0})),N&&N.buildings?K(l.a.Fragment,null,K(j.a,null),K(B.a,{heads:ve(),icon:K(H.a,null),onSelect:function(e){return q.push("/condos/condo?id=".concat(e))}})):"")),K(p.a,{className:T.panel},K(w.a,null,K(_.a,null,K(S.a,null,K(k.a,null,K(C.a,null))),K(E.a,{primary:d("Members"),secondary:N&&N.members?N.members.length:0})),N&&N.members?K(l.a.Fragment,null,K(j.a,null),K(B.a,{heads:N.members.map((function(e){return{id:e.id,name:e.name,subname:e.association_role,image:e.image}})),onSelect:function(e){return q.push("/users/user?id=".concat(e))}})):"")))))}},rcHE:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),i=a("R/WZ"),o=a("eD//"),c=a("tVbE"),s=a("SLcR"),u=a("469l"),l=a("IsqK"),d=r.a.createElement,m=function(e){return d(c.a,{button:!0,onClick:function(){return e.onSelect(e.head.id)}},d(s.a,null,d(u.a,{src:e.head.image},e.icon?e.icon:e.head.name.charAt(0))),d(l.a,{primary:e.head.name,secondary:e.head.subname?e.head.subname:""}))},p=r.a.createElement,f=Object(i.a)((function(e){return{chatHeadsContainer:{overflowY:"scroll"}}}));t.a=function(e){var t=f();return e.heads.length>0?p(o.a,{className:t.chatHeadsContainer},e.heads.sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(t,a){return p(m,{key:a,head:t,icon:e.icon,onSelect:function(t){return e.onSelect(t)}})}))):p(r.a.Fragment,null)}},"tqx+":function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/associations/association",function(){return a("i5Ti")}])},"xM+5":function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n),i=a("30+C"),o=a("oa/T"),c=a("r9w1"),s=a("o4QW"),u=a("Z3vd"),l=a("9Koi"),d=r.a.createElement;t.a=function(e){var t=Object(l.a)().t,a=Object(n.useState)(""),r=a[0],m=a[1];return d(i.a,null,d(o.a,null,d(c.a,{variant:"outlined",multiline:!0,rows:r.split("\n").length,fullWidth:!0,value:r,autoComplete:"off",placeholder:t("What's on your mind?"),onChange:function(e){return m(e.target.value)}})),d(s.a,null,d(u.a,{variant:"contained",fullWidth:!0,color:"primary",onClick:function(){return e.onSend&&""!=r&&e.onSend(r),void m("")}},t("Post"))))}},y9ZN:function(e,t,a){"use strict";var n=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("q1tI")),i=(0,n(a("8/g6")).default)(r.default.createElement("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"}),"People");t.default=i}},[["tqx+",0,2,4,10,1,3,5,6,7,8,9,11]]]);