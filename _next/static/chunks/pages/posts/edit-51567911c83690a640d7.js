_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[29],{cree:function(e,t,n){"use strict";n.r(t);var r=n("o0o1"),a=n.n(r),o=n("HaE+"),c=n("rePB"),i=n("ODXe"),s=n("q1tI"),u=n.n(s),p=n("nOHt"),f=n("9Koi"),d=n("R/WZ"),l=n("tRbT"),O=n("kKAo"),b=n("ofer"),j=n("r9w1"),w=n("Z3vd"),g=n("79Xs"),m=n("cBaE"),h=n("apO0"),v=u.a.createElement;function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){Object(c.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var P=Object(d.a)((function(e){return{mainContainer:{width:"100%",height:"100vh"},loginContainer:{padding:e.spacing(2)}}}));t.default=function(){var e=Object(p.useRouter)(),t=Object(m.e)(),n=Object(i.a)(t,2),r=n[0],u=n[1],d=P(),y=Object(f.a)().t,_=Object(s.useState)(null),N=_[0],C=_[1],k=Object(s.useState)(""),x=k[0],D=k[1],S=u&&u.roles&&null!=u.roles.find((function(e){return"admin"==e})),T=u&&N&&u.id==N.user_id,X=function(){var t=Object(o.a)(a.a.mark((function t(){var n;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.query.id||e.push("/"),t.next=3,Object(m.a)("posts/index","find",{id:e.query.id});case 3:(n=t.sent).posts&&n.posts[0]?C(n.posts[0]):(D("Post not found"),e.push("/"));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),q=function(){var t=Object(o.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(m.a)("posts/index","update",N);case 2:t.sent.id?(e.push("/"),D("Post updated")):D("Something went wrong!");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(s.useEffect)((function(){r||u||S||T||e.push("/")}),[u,N,r]),Object(s.useEffect)((function(){u&&X()}),[u]),v(h.a,{center:!0,title:"Edit post | CON",loading:r},v(l.a,{className:d.mainContainer,container:!0,direction:"column",alignItems:"center",justify:"center",spacing:3},v(l.a,{item:!0},v(O.a,null,v(l.a,{className:d.loginContainer,container:!0,direction:"column",justify:"center",spacing:3},v(l.a,{item:!0},v(b.a,{variant:"h4"},"Edit post from",N&&N.user?" ".concat(N.user.name):" unknown user")),v(l.a,{item:!0},v(j.a,{fullWidth:!0,label:y("Content"),name:"data",value:N&&N.data?N.data:"",onChange:function(e){C(E(E({},N),{},Object(c.a)({},e.target.name,e.target.value)))}})),v(l.a,{item:!0},v(w.a,{variant:"contained",color:"secondary",onClick:q},y("Save post")),v(g.a,{open:""!=x,autoHideDuration:6e3,onClose:function(){return D("")},message:x})))))))}},g7TN:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts/edit",function(){return n("cree")}])}},[["g7TN",0,2,4,1,3,5,6,7,8]]]);