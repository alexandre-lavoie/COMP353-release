_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[32],{"073A":function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/users/profile",function(){return n("6wg8")}])},"6wg8":function(e,t,n){"use strict";n.r(t);var a=n("o0o1"),r=n.n(a),i=n("rePB"),c=n("HaE+"),s=n("ODXe"),o=n("q1tI"),u=n.n(o),l=n("nOHt"),p=n("9Koi"),d=n("R/WZ"),f=n("tRbT"),m=n("kKAo"),g=n("PsDL"),b=n("469l"),O=n("r9w1"),h=n("Z3vd"),j=n("79Xs"),w=n("cBaE"),v=n("apO0"),y=u.a.createElement;function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){Object(i.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=Object(d.a)((function(e){return{mainContainer:{width:"100%",height:"100vh"},loginContainer:{padding:e.spacing(3)},avatar:{width:e.spacing(10),height:e.spacing(10)}}}));t.default=function(){var e=Object(l.useRouter)(),t=C(),n=Object(p.a)().t,a=Object(w.e)(),u=Object(s.a)(a,2),d=u[0],E=u[1],_=Object(o.useState)(null),N=_[0],k=_[1],x=Object(o.useState)(null),S=x[0],D=x[1],q=Object(o.useState)(""),A=q[0],W=q[1],X=E&&E.roles&&null!=E.roles.find((function(e){return"admin"==e})),H=function(){var e=Object(c.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("image"!=t.target.name){e.next=8;break}return n=t.target.files[0],e.next=4,Object(w.c)(n);case 4:return a=e.sent,D(n),k(P(P({},N),{},{image:a})),e.abrupt("return");case 8:k(P(P({},N),{},Object(i.a)({},t.target.name,t.target.value.trim())));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var t=Object(c.a)(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(w.a)("users/index","update",P(P({},N),{},{image:S}));case 2:n=t.sent,console.log(n),n.id?(W("Profile updated"),e.push("/users/user?id=".concat(N.id))):W("Something went wrong!");case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),T=function(){var t=Object(c.a)(r.a.mark((function t(){var n,a;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(w.a)("users/index","find",{id:e.query.id});case 2:(n=t.sent).users&&n.users[0]?((a=n.users[0]).id==E.id&&(e.query.id=null),k(a)):(W("User not found"),e.push("/"));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(o.useEffect)((function(){E&&(N?X||e.push("/"):e.query.id?T():k(P({},E)))}),[E,N]),Object(o.useEffect)((function(){d||E||e.push("/")}),[E,d]),y(v.a,{center:!0,title:"".concat(e.query.id?"Edit User":"Account Settings"," | CON"),loading:d||!N},y(f.a,{className:t.mainContainer,justify:"center",alignItems:"center",container:!0,direction:"column",spacing:3},y(f.a,{item:!0},y(m.a,null,y(f.a,{className:t.loginContainer,container:!0,direction:"column",justify:"center",spacing:3},y(f.a,{item:!0,container:!0,justify:"center"},y(g.a,{component:"label"},y(b.a,{src:N&&N.image?N.image:null,className:t.avatar}),y("input",{hidden:!0,type:"file",name:"image",accept:"image/png, image/jpeg",onChange:H}))),y(f.a,{item:!0},y(O.a,{fullWidth:!0,label:n("Name"),name:"name",value:N&&N.name?N.name:"",onChange:H})),y(f.a,{item:!0},y(O.a,{fullWidth:!0,label:n("Address"),name:"address",value:N&&N.address?N.address:"",onChange:H})),y(f.a,{item:!0},y(O.a,{fullWidth:!0,label:n("Email"),name:"email",value:N&&N.email?N.email:"",onChange:H})),y(f.a,{item:!0},y(O.a,{fullWidth:!0,label:n("Password"),type:"password",name:"password",onChange:H})),y(f.a,{item:!0},y(h.a,{variant:"contained",color:"secondary",onClick:R},"Save ".concat(e.query.id?"User":"changes")),y(j.a,{open:""!=A,autoHideDuration:6e3,onClose:function(){return W("")},message:A})))))))}}},[["073A",0,2,4,1,3,5,6,7,8]]]);